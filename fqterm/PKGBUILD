# Maintainer: Jekyll Wu <adaptee [at] gmail [dot] com>

pkgname=fqterm
pkgver=0.9.6.10
pkgrel=3
pkgdesc="A cross-platform terminal emulator program which supports telnet/ssh1/ssh2"
arch=('i686' 'x86_64')
url="http://code.google.com/p/${pkgname}/"
license=('GPL2')
depends=('qt' 'python')
makedepends=('cmake')
source=(http://${pkgname}.googlecode.com/files/${pkgname}-${pkgver}.tar.gz
        ${pkgname}.desktop
        0001-fix-compile-failed-under-gcc-4.7.patch)

build() {
    cd ${srcdir}/${pkgname}-${pkgver}
    patch  -p1 -i ../0001-fix-compile-failed-under-gcc-4.7.patch
    cmake . -DCMAKE_INSTALL_PREFIX=/usr \
        -DCMAKE_SKIP_RPATH=ON \
        -DCMAKE_BUILD_TYPE=Release
    make
}

package() {

    cd ${srcdir}/${pkgname}-${pkgver}

    make DESTDIR="${pkgdir}" install 
    install -d ${pkgdir}/usr/{bin,share/{applications,pixmaps,${pkgname}}}
    install -m644 res/pic/${pkgname}.png ${pkgdir}/usr/share/pixmaps/${pkgname}.png
    install -Dm644 ${srcdir}/${pkgname}.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop
}

md5sums=('07a53b9a45087e335fbae0b84ec7aa86'
         'a6584cd72aee536ae3ec0d9f1b763201'
         '096cec4dcae20116f1a4f13373d25e27')
